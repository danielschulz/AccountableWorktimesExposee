sum(kum$nominal)
1960 / 4584
4584 / 1960
4584 / 8
1960 / 8
paste0(paste0("weekend work YOI: ", sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))), " h")
paste0(paste0(paste0("weekend work YOI: ", sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))), " h von "), sum(na.omit(koi$nominal)))
paste0(paste0(paste0("weekend work ALL: ", sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual))), " h von "),
sum(na.omit(kum$nominal)))
paste0(paste0(paste0(paste0("weekend work YOI: ", sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))), " h von "),
sum(na.omit(koi$nominal))), (sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal))))
paste0(paste0(paste0("weekend work YOI: ", sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))), " h von "),
sum(na.omit(koi$nominal)))
paste0(paste0(paste0("weekend work ALL: ", sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual))), " h von "),
sum(na.omit(kum$nominal)))
paste0("YOI: ", (sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal))))
paste0("YOI: ", round(sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal)), 2))
paste0("ALL: ", round(sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual)) / sum(na.omit(kum$nominal)), 2))
paste0("YOI: ", round(sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal)), 4))
paste0("ALL: ", round(sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual)) / sum(na.omit(kum$nominal)), 4))
paste0("YOI: ", round(sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal)), 5))
paste0("ALL: ", round(sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual)) / sum(na.omit(kum$nominal)), 5))
paste0("YOI: ", round(sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal)), 5))
paste0("ALL: ", round(sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual)) / sum(na.omit(kum$nominal)), 5))
0.08746 / 0.07174
0.07174 / 0.08746
paste0("YOI vs ALL: ", round(
(sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual)) / sum(na.omit(koi$nominal))) /
(sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual)) / sum(na.omit(kum$nominal)), 5))
h_yoi_1 = sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))
h_yoi_2 = sum(na.omit(koi$nominal))
h_yoi = h_yoi_1 / h_yoi_2
paste0("YOI: ", round(h_yoi, 5))
paste0("YOI vs ALL: ", round(H_yoi / h_all, 5))
h_yoi_1 = sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))
h_yoi_2 = sum(na.omit(koi$nominal))
h_yoi   = h_yoi_1 / h_yoi_2
h_all_1 = sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual))
h_all_2 = sum(na.omit(kum$nominal))
h_all   = H-all_1 / h_all_2
paste0("YOI: ", round(h_yoi, 5))
h_yoi_1 = sum(na.omit(subset(koi, !koi$isWorkDay)$fragActual))
h_yoi_2 = sum(na.omit(koi$nominal))
h_yoi   = h_yoi_1 / h_yoi_2
h_all_1 = sum(na.omit(subset(kum, !kum$isWorkDay)$fragActual))
h_all_2 = sum(na.omit(kum$nominal))
h_all   = h_all_1 / h_all_2
paste0("YOI: ", round(h_yoi, 5))
paste0("ALL: ", round(h_all, 5))
paste0("YOI vs ALL: ", round(H_yoi / h_all, 5))
paste0("YOI vs ALL: ", round(h_yoi / h_all, 5))
paste0("YOI vs ALL: ", round(h_yoi / h_all, 3))
paste0("YOI vs. ALL: ", round(h_yoi / h_all, 3))
quantile(accounts$actual, probs = seq(0, 1, 0.1))
hist(accounts$actual)
gsub("\\((.*?) :: (0\\.[0-9]+)\\)","\\1 \\2", "(sometext :: 0.1231313213)")
gsub("\\(\\d+ \\d+ \\d+\\)", "\\2 \\3", "(12 34 45)")
gsub("\\(\\d+ \\d+ \\d+\\)", "\\1 \\2", "(12 34 45)")
gsub("\\((\\d+) (\\d+) (\\d+)\\)", "\\1 \\2", "(12 34 45)")
gsub("\\((\\d+) (\\d+) (\\d+)\\)", "\\1 \\3", "(12 34 45)")
gsub("\\((\\d+) (\\d+) (\\d+)\\)", "\\2 \\3", "(12 34 45)")
doi[1,]$vorgang
doi[2,]$vorgang
gsub(VORGANG_PATTERN, "\\1", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\2", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\0", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\1", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\3", doi[2,]$vorgang)
gsub("^(\\d+(\\.\\d+)+)\\.*", "\\1", doi[2,]$vorgang)
gsub("^(\\d+(?:\\.\\d+)+)\\.*", "\\1", doi[2,]$vorgang)
gsub("^(\\d+(?:\\.\\d+)+)\\.*", "\\2", doi[2,]$vorgang)
gsub("^(\\d+(?:\\.\\d+)+)(\\.*)", "\\2", doi[2,]$vorgang)
gsub("^(\\d+(?:\\.\\d+)+)(\\.*)", "\\1", doi[2,]$vorgang)
gsub("^((\\d+(?:\\.\\d+)+))(\\.*)", "\\1", doi[2,]$vorgang)
gsub("^((\\d+(?:\\.\\d+)+))(\\.*)", "\\2", doi[2,]$vorgang)
gsub("^((\\d+(?:\\.\\d+)+))(\\.*)", "\\3", doi[2,]$vorgang)
gsub("^((\\d+(?:\\.\\d+)+))(\\.*)", "\\2", doi[2,]$vorgang)
gsub("(\\d+).*", "\\2", doi[2,]$vorgang)
gsub("(\\d+)\\s.*", "\\2", doi[2,]$vorgang)
gsub("(.*)\\s.*", "\\2", doi[2,]$vorgang)
gsub("(.*)\\s.*", "\\1", doi[2,]$vorgang)
gsub("(.*)\\s.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s.*", "\\3", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s.*", "\\4", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s.*", "\\1", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s(.*)", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s(.*)", "\\3", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s(.*)", "\\4", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s(.*)", "\\5", doi[2,]$vorgang)
gsub("^([\\d\\.]*)\\s*.*", "\\5", doi[2,]$vorgang)
gsub("^([\\d\\.]*)\\s*.*", "\\1", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s*.*", "\\1", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s*.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\s*.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s+.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s*.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s+.*", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s+.*", "\\3", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s+.*", "\\1", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s+.*", "\\0", doi[2,]$vorgang)
gsub("^([\\d\\.]*)\\s+.*", "\\1", doi[2,]$vorgang)
gsub("^([\\d\\.]*)\\s+.*", "\\2", doi[2,]$vorgang)
gsub("^([\\d\\.]*)\\s+.*", "\\3", doi[2,]$vorgang)
gsub("^(([\\d\\.]*)\\s+.*)$", "\\3", doi[2,]$vorgang)
gsub("^(([\\d\\.]*)\\s+.*)$", "\\1", doi[2,]$vorgang)
gsub("^(([\\d\\.]*)\\s+.*)$", "\\2", doi[2,]$vorgang)
gsub("([\\d\\.]*)\\s+.*", "\\2", doi[2,]$vorgang)
gsub("(\\d+(\\.\\d+)*)\\s+.*", "\\2", doi[2,]$vorgang)
gsub("(\\d+(\\.\\d+)*)\\s+.*", "\\1", doi[2,]$vorgang)
gsub("(\\d+(?:\\.\\d+)*)\\s+.*", "\\1", doi[2,]$vorgang)
gsub("(\\d+(?:\\.\\d+)*)\\s+.*", "\\2", doi[2,]$vorgang)
gsub("(\\d+(?:\\.\\d+)*)\\s+.*", "\\1", doi[2,]$vorgang)
doi[2,]$vorgang
gsub(DATE_PATTERN, "\\1", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\1", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\2", doi[2,]$vorgang)
gsub(VORGANG_PATTERN, "\\1", doi[2,]$vorgang)
VORGANG_PATTERN = "(\\d+(?:\\.\\d+)*)\\s+.*"
gsub(VORGANG_PATTERN, "\\1", doi[2,]$vorgang)
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
source("../scripts/eda.R")
View(doi)
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
View(data)
View(subset(data, is.na(data$vorgangNo)))
View(subset(data, is.na(data$vorgangNo) && data$isWorkDay))
View(subset(data, is.na(data$vorgangNo)))
View(subset(data, is.na(data$vorgangNo) && data$isWorkDay))
View(subset(data, is.na(data$vorgangNo) && data$isWorkDay == TRUE))
View(subset(data, is.na(data$vorgangNo) && data$nominal == 0))
View(subset(data, is.na(data$vorgangNo)))
sum(subset(data, is.na(data$vorgangNo))$nominal)
sum(subset(data, is.na(data$vorgangNo))$fragActual)
sum(na.omit(subset(data, is.na(data$vorgangNo))$fragActual))
View(subset(data, is.na(data$vorgangNo) && data$year == 2013))
View(subset(data, is.na(data$vorgangNo) && data$year == "2013"))
View(subset(data, is.na(data$vorgangNo) & data$year == 2013))
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay))
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay & data$baustein == "Ausbildung - intern"))
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay & data$baustein == "Ausbildung - intern"))
TRUE & FALSE
TRUE | FALSE
TRUE || FALSE
TRUE && FALSE
TRUE | FALSE
rawData$holiday = "Ausbildung - intern" == rawData$baustein |
"Ausbildung - extern" == rawData$baustein
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay & data$baustein == "Ausbildung - intern"))
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay))
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay))
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
View(data)
sum(na.omit(subset(data, data$holiday)))
sum(na.omit(subset(data, data$holiday))$fragActual)
length(na.omit(subset(data, data$holiday))$fragActual)
length(subset(data, data$holiday)$fragActual)
length(subset(data, data$holiday))
View(subset(data, data$holiday))
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay))
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
View(data)
View(subset(data, is.na(data$vorgangNo) & data$isWorkDay))
length(subset(data, data$holiday))
length(subset(data, data$holiday & data$year == 2013))
length(subset(data, data$holiday & data$year == 2012))
length(subset(data, data$holiday & data$year == 2011))
View(subset(data, data$holiday & data$year == 2011))
View(subset(data, data$holiday & data$year == 2012))
dim(subset(data, data$holiday & data$year == 2012))
dim(subset(data, data$holiday & data$year == 2013))
dim(subset(data, data$holiday & data$year == 2015))
dim(subset(data, data$holiday & data$year == 2014))
dim(subset(data, data$holiday & data$year == 2014))[1]
dim(subset(data, data$holiday & data$year == 2011))[1]
dim(subset(data, data$holiday & data$year == 2012))[1]
dim(subset(data, data$holiday & data$year == 2013))[1]
View(subset(data, data$holiday & data$year == 2013))
dim(subset(data, data$holiday & data$year == 2013))[1]
dim(subset(data, data$holiday & data$year == 2011))[1]
dim(subset(data, data$holiday & data$year == 2012))[1]
dim(subset(data, data$holiday & data$year == 2013))[1]
dim(subset(data, data$holiday & data$year == 2014))[1]
paste0(paste0(dim(subset(data, data$holiday & data$year == 2011))[1], "days holiday in "), 2011)
printHolidayDays = function(days, year) {
paste0(paste0(dim(subset(data, data$holiday & data$year == 2011))[1], " days holiday in "), 2011)
}
printHolidayDays(dim(subset(data, data$holiday & data$year == 2011))[1], 2011)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2011))[1], 2011)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2012))[1], 2012)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2013))[1], 2013)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2014))[1], 2014)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2011))[1], 2011)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2012))[1], 2012)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2013))[1], 2013)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2014))[1], 2014)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2011))[1], 2011)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2012))[1], 2012)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2013))[1], 2013)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2014))[1], 2014)
printHolidayDays = function(days, year) {
paste0(paste0(days, " days holiday in "), year)
}
printHolidayDays(dim(subset(data, data$holiday & data$year == 2012))[1], 2012)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2013))[1], 2013)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2014))[1], 2014)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2011))[1], 2011)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2012))[1], 2012)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2013))[1], 2013)
printHolidayDays(dim(subset(data, data$holiday & data$year == 2014))[1], 2014)
8+13
32-13
unique(data$vorgangNo)
View(subset(data, data$vorgangNo == "47632.3.7"))
View(subset(data, data$vorgangNo == "47632.4.2"))
View(subset(data, data$vorgangNo == "47632.4.1"))
gsub(VORGANG_PATTERN, "\\1", "47632.4.2")
gsub("(\\d+(?:\\.\\d+)*)\\s+.*", "\\1", "47632.4.2")
gsub("((\\d+)(?:\\.\\d+)*)\\s+.*", "\\1", "47632.4.2")
gsub("((\\d+)(?:\\.\\d+)*)\\s+.*", "\\2", "47632.4.2")
gsub("((\\d+)(?:\\.\\d+)*)\\s+.*", "\\3", "47632.4.2")
gsub("(\\d+)(?:\\.\\d+)*\\s+.*", "\\3", "47632.4.2")
gsub("(\\d+)(?:\\.\\d+)*\\s+.*", "\\1", "47632.4.2")
gsub("(\\d+)(?:\\.\\d+)*\\s+.*", "\\2", "47632.4.2")
gsub("(\\d+)(\\.\\d+)*\\s+.*", "\\1", "47632.4.2")
gsub("(\\d+)(\\.\\d+)*\\s+.*", "\\0", "47632.4.2")
gsub("(\\d+)(\\.\\d+)*\\s+.*", "\\2", "47632.4.2")
gsub("((\\d+))(\\.\\d+)*\\s+.*", "\\2", "47632.4.2")
gsub("((\\d+))(\\.\\d+)*\\s+.*", "\\1", "47632.4.2")
gsub("((\\d+)(\\.\\d+)*)\\s+.*", "\\1", "47632.4.2")
gsub("((\\d+)(\\.\\d+)*)\\s+.*", "\\2", "47632.4.2")
gsub("((\\d+)(\\.\\d+)*)\\s+.*", "\\3", "47632.4.2")
gsub("(\\d+).*", "\\1", "47632.4.2")
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
boxplot(doi$fragActual ~ doi$vorgangNoFst)
hist(doi$fragActual ~ doi$vorgangNoFst)
chart(doi$fragActual ~ doi$vorgangNoFst)
bar(doi$fragActual ~ doi$vorgangNoFst)
barchart(doi$fragActual ~ doi$vorgangNoFst)
plot(doi$fragActual ~ doi$vorgangNoFst)
boxplot(sum(doi$fragActual) ~ doi$vorgangNoFst)
boxplot(doi$fragActual ~ doi$vorgangNoFst)
boxplot(length(doi$fragActual) ~ doi$vorgangNoFst)
unique(data$vorgangNoFst)
View(subset(data, data$vorgangNoFst == "43013"))
View(subset(data, data$vorgangNoFst == "47632"))
View(subset(data, data$vorgangNoFst == "46495"))
View(subset(data, data$vorgangNoFst == "43013"))
View(subset(data, data$vorgangNoFst == "47632"))
View(subset(data, data$vorgangNoFst == "46495"))
x = data.frame(x = seq(0,3, 1))
x
x$y = NA
x
x$y = if (x$y == 1) { TRUE } else-if (x$y == 2) { FALSE }
x
x
y <- if(TRUE)
{
y <- 3
4
}
y
x = if (TRUE) {1}
x
x = data.frame(x = seq(0,3, 1))
x
x$y = NA
x
x$y = if (TRUE) {1}
x
x$y = if (x$x == 2) {2}
a1 <- 1:10                 #Belegung mit Zahlenreihe
a2 <- 2:30
a3 <- 3:40
sapply(list(a1,a2,a3),mean)
a1
a2
a3
sapply(list(a1,a2,a3),mean)
x = data.frame(x = seq(1,12,1), y = NA)
x
x = data.frame(a = seq(1,12,1), b = NA)
x
sapply(x$a, x$b = x$a == 10)
x$b = x$a == 10
x
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
data$isCustomer
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
data$customer[which(data$customer == "46495")] = "HRS"
data$customer[which(data$customer == "46495")]
data$customer = NA
data$customer[which(data$customer == "46495")]
data$customer[which(data$customer == "46495")] = "HRS"
data$customer[which(data$customer == "46495")]
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
data$customer[which(data$vorgangNoFst == "46495")]
data$customer[which(data$vorgangNoFst == "46495")] = "HRS"
data$customer[which(data$vorgangNoFst == "46495")]
unique(data$vorgangNoFst)
View(subset(data, data$vorgangNoFst == "49810"))
data$customer[which(data$vorgangNoFst == "46495")]
data$customer[which(data$vorgangNoFst == "46495" | data$vorgangNoFst == "43013")]
data$customer[which(data$vorgangNoFst == "46495" | data$vorgangNoFst == "49810")]
View(subset(data, data$vorgangNoFst == "49810"))
unique(data$vorgangNoFst)
data$customer[which(data$vorgangNoFst == "52087")]
View(subset(data, data$vorgangNoFst == "52087"))
View(subset(data, data$vorgangNoFst == "52681"))
View(subset(data, data$vorgangNoFst == "52604"))
View(subset(data, data$vorgangNoFst == "48504"))
View(subset(data, data$vorgangNoFst == "50760"))
View(subset(data, data$vorgangNoFst == "51450"))
View(subset(data, data$vorgangNoFst == "54011"))
View(subset(data, data$vorgangNoFst == "53878"))
View(subset(data, data$vorgangNoFst == "55877"))
View(subset(data, data$vorgangNoFst == "54795"))
View(subset(data, data$vorgangNoFst == "57294"))
View(subset(data, data$vorgangNoFst == "58028"))
View(subset(data, data$vorgangNoFst == "57727"))
View(subset(data, data$vorgangNoFst == "58120"))
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
# SETUP WORKSPACE
set.seed(4711)
PERSISTENT_CONSTANTS = c("PERSISTENT_CONSTANTS", "VORGANG_PATTERN", "DATE_PATTERN", "YEAR_OF_INTEREST",
"DATES_TO_IGNORE", "DATE_KUM_ROW", "DATE_FORMAT", "data",
"datesMap", "weekdaysMap", "kumMap", "bausteinMap", "vorgangMap")
DATE_FORMAT = "%d.%m.%y"
VORGANG_PATTERN = "(\\d+(?:\\.\\d+)*)\\s+.*"
DATE_PATTERN = "^(\\d+\\.\\d+\\.\\d+)$"
DATE_KUM_ROW = "kum:"
DATES_TO_IGNORE = c(DATE_KUM_ROW, ">>>>")
# install.packages("stringr")
library("stringr")
# clean
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
# constants
PERSISTENT_CONSTANTS = c("PERSISTENT_CONSTANTS")
# FUNCTIONS
printHolidayDays = function(days, year) {
paste0(paste0(days, " days holiday in "), year)
}
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
curDate = NA
curNominal = NA
curWeekday = NA
rawData$vorgangNo = NA
rawData$vorgangNoFst = NA
# targets: dates, weekdays, kum, baustein, vorgang
for (i in 1:length(rawData$vorgang)) {
if (TRUE == regexpr(DATE_PATTERN, rawData[i,]$date)) {
curDate = as.Date(rawData[i,]$date, format=DATE_FORMAT)
curNominal = rawData[i,]$nominal
curWeekday = rawData[i,]$weekday
} else {
rawData[i,]$date = format(curDate, DATE_FORMAT)
rawData[i,]$nominal = curNominal
rawData[i,]$weekday = curWeekday
}
if (TRUE == regexpr(VORGANG_PATTERN, rawData[i,]$vorgang)) {
rawData[i,]$vorgangNo = gsub(VORGANG_PATTERN, "\\1", rawData[i,]$vorgang)
rawData[i,]$vorgangNoFst = gsub("(\\d+).*", "\\1", rawData[i,]$vorgang)
}
}
rawData$weekday = weekdays(as.Date(rawData$date, DATE_FORMAT))
rawData$day   =   format(as.Date(rawData$date, DATE_FORMAT), "%d")
rawData$month =   format(as.Date(rawData$date, DATE_FORMAT), "%m")
rawData$year  =   format(as.Date(rawData$date, DATE_FORMAT), "%Y")
rawData$learning = "Ausbildung - intern" == rawData$baustein |
"Ausbildung - extern" == rawData$baustein
rawData$recreation = "Flex-Time" == rawData$baustein |
"Unbezahlter Urlaub" == rawData$baustein
rawData$holiday = "Urlaub" == rawData$baustein
rawData$isIntern = NA
rawData$intermediateProxy = NA
rawData$benefitingCustomer = NA
rawData$isIntern = "43013" == rawData$vorgangNoFst | "47632" == rawData$vorgangNoFst | "52681" == rawData$vorgangNoFst |
"51450" == rawData$vorgangNoFst | "58120" == rawData$vorgangNoFst
data$benefitingCustomer[which("46495" == data$vorgangNoFst | "49810" == data$vorgangNoFst | "52087" == data$vorgangNoFst)] = "HRS"
View(rawData)
rawData$benefitingCustomer[which("46495" == rawData$vorgangNoFst | "49810" == rawData$vorgangNoFst | "52087" == rawData$vorgangNoFst)] = "HRS"
rawData$benefitingCustomer[which("52604" == rawData$vorgangNoFst | "48504" == rawData$vorgangNoFst | "50760" == rawData$vorgangNoFst |
"53878" == rawData$vorgangNoFst | "55877" == rawData$vorgangNoFst | "54795" == rawData$vorgangNoFst |
"57294" == rawData$vorgangNoFst | "58028" == rawData$vorgangNoFst | "57727" == rawData$vorgangNoFst)] = "Audi"
rawData$benefitingCustomer[which("54011" == rawData$vorgangNoFst | "48504" == rawData$vorgangNoFst | "50760" == rawData$vorgangNoFst)] = "Daimler"
rawData$intermediateProxy[which("52604" == rawData$vorgangNoFst | "48504" == rawData$vorgangNoFst | "50760" == rawData$vorgangNoFst |
"53878" == rawData$vorgangNoFst | "55877" == rawData$vorgangNoFst | "54795" == rawData$vorgangNoFst |
"57294" == rawData$vorgangNoFst | "58028" == rawData$vorgangNoFst | "57727" == rawData$vorgangNoFst |
"54011" == rawData$vorgangNoFst | "48504" == rawData$vorgangNoFst | "50760" == rawData$vorgangNoFst)] = "GB A"
rawData$isWorkDay = 0 < rawData$nominal
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
source("../scripts/eda.R")
dim(subset(data, !is.na(data$benefitingCustomer)))
dim(subset(doi, !is.na(data$benefitingCustomer)))
View(subset(doi, !is.na(data$benefitingCustomer)))
View(subset(doi, !is.na(doi$benefitingCustomer)))
unique(doi$year)
View(subset(doi, !is.na(doi$benefitingCustomer)))
sum(subset(doi, !is.na(doi$benefitingCustomer))$fragActual)
sum(doi$fragActual)
sum(na.omit(doi$fragActual))
View(subset(doi, is.na(doi$benefitingCustomer)))
unique(subset(doi, is.na(doi$benefitingCustomer))$vorgangNoFst)
View(subset(data, data$vorgangNoFst == "52681"))
View(subset(data, data$vorgangNoFst == "51450"))
sum(na.omit(doi$fragActual[which(doi$benefitingCustomer = "Audi")]))
sum(na.omit(doi$fragActual[which(doi$benefitingCustomer == "Audi")]))
sum(na.omit(doi$fragActual[which(doi$benefitingCustomer == "Daimler")]))
sum(na.omit(doi$fragActual[which(doi$benefitingCustomer == "Audi")]))
538.25+1136.5
sum(na.omit(doi$fragActual[which(doi$isIntern)]))
sum(na.omit(doi$fragActual[which(doi$intermediateProxy)]))
sum(na.omit(doi$fragActual[which(is.na(doi$intermediateProxy)])))
sum(na.omit(doi$fragActual[which(is.na(doi$intermediateProxy))]))
View(subset(data, data$vorgangNoFst == "51450"))
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
unique(data$year)
for (y in unique(data$year)) {
printHolidayDays(dim(subset(data, data$holiday & data$year == y))[1], y)
}
# holidays
for (y in unique(data$year)) {
printHolidayDays(dim(subset(data, data$holiday & data$year == y))[1], y)
}
rm(list = ls()[!(ls() %in% PERSISTENT_CONSTANTS)])
YEAR_OF_INTEREST = 2013
source("../scripts/setup.R")
source("../scripts/loadDataFrame.R")
source("../scripts/transform.R")
printHolidayDays = function(days, year) {
print(paste0(paste0(days, " days holiday in "), year))
}
for (y in unique(data$year)) {
printHolidayDays(dim(subset(data, data$holiday & data$year == y))[1], y)
}
for (y in unique(data$year)) {
printHolidayDays(dim(subset(data, data$holiday & data$year == y))[1], y)
}
View(data[which(data$benefitingCustomer == "HRS")])
View(subset(data, data$benefitingCustomer == "HRS"))
View(subset(data, data$benefitingCustomer == "Audi"))
unique(subset(data, data$benefitingCustomer == "Audi")$vorgang)
unique(subset(data, data$benefitingCustomer == "Daimler")$vorgang)
unique(subset(data, data$benefitingCustomer == "HRS")$vorgang)
unique(subset(data, data$benefitingCustomer != "HRS" & data$benefitingCustomer != "Audi" & data$benefitingCustomer != "Daimler")$vorgang)
unique(subset(data, data$benefitingCustomer != "HRS" || data$benefitingCustomer != "Audi" || data$benefitingCustomer != "Daimler")$vorgang)
unique(subset(data, !(data$benefitingCustomer == "HRS" || data$benefitingCustomer == "Audi" || data$benefitingCustomer == "Daimler"))$vorgang)
View(subset(data, !(data$benefitingCustomer == "HRS" || data$benefitingCustomer == "Audi" || data$benefitingCustomer == "Daimler"))$vorgang)
View(subset(data, !(data$benefitingCustomer == "HRS"))$vorgang)
View(subset(data, (data$benefitingCustomer == "HRS" | data$benefitingCustomer == "Audi" | data$benefitingCustomer == "Daimler"))$vorgang)
View(subset(data, (data$benefitingCustomer == "HRS" | data$benefitingCustomer == "Audi" | data$benefitingCustomer == "Daimler"))$vorgang)
unique(subset(data, (data$benefitingCustomer == "HRS" | data$benefitingCustomer == "Audi" | data$benefitingCustomer == "Daimler"))$vorgang)
unique(subset(data, !(data$benefitingCustomer == "HRS" | data$benefitingCustomer == "Audi" | data$benefitingCustomer == "Daimler"))$vorgang)
unique(subset(data, (data$benefitingCustomer != "HRS" & data$benefitingCustomer != "Audi" & data$benefitingCustomer != "Daimler"))$vorgang)
unique(subset(data, (data$benefitingCustomer == "HRS" & data$benefitingCustomer == "Audi" & data$benefitingCustomer == "Daimler"))$vorgang)
unique(subset(data, (data$benefitingCustomer == "HRS" | data$benefitingCustomer == "Audi" | data$benefitingCustomer == "Daimler"))$vorgang)
unique(subset(data, is.na(data$benefitingCustomer))$vorgang)
unique(subset(data, is.na(data$benefitingCustomer))$vorgang)
